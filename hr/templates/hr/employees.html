{% extends 'hr/base.html' %}

{% block content %}
<div class="container">
  <h2 class="mb-4">Employees</h2>
  <a href="{% url 'add_employee' %}" class="btn btn-primary mb-3">+ Add Employee</a>
  <a href="{% url 'export_employees_csv' %}" class="btn btn-secondary mb-3 ms-2">⬇️ Export Employees (CSV)</a>

  <table class="table table-bordered table-striped align-middle">
    <thead class="table-dark text-center">
      <tr>
        <th>Name</th>
        <th>Position</th>
        <th>Department</th>
        <th>Email</th>
        <th>Salary</th>
        <th>Date Joined</th>
        <th>Actions</th>
      </tr>
    </thead>

    <tbody>
      {% for emp in employees %}
      <tr>
        <td>{{ emp.name }}</td>
        <td>{{ emp.position }}</td>
        <td>{{ emp.department }}</td>
        <td>{{ emp.email }}</td>
        <td>${{ emp.salary }}</td>
        <td>{{ emp.date_joined }}</td>
       <td class="text-center">
  {% if emp.id %}
    <a href="{% url 'edit_employee' emp.id %}" class="btn btn-sm btn-warning me-2">Edit</a>
    <a href="{% url 'delete_employee' emp.id %}" class="btn btn-sm btn-danger"
       onclick="return confirm('Are you sure you want to delete this employee?')">Delete</a>
  {% else %}
    <span class="text-muted">Invalid Record</span>
  {% endif %}
</td>

      </tr>
      {% empty %}
      <tr>
        <td colspan="7" class="text-center text-muted">No employees found. Add a new one!</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
