{% extends 'hr/base.html' %}
{% block title %}Employees{% endblock %}

{% block header_actions %}
  <div class="action-buttons">
    <a href="{% url 'add_employee' %}" class="btn primary"><i class="bi bi-plus-circle"></i>Add Employee </a>
    <a href="{% url 'export_employees_csv' %}" class="btn"><i class="bi bi-download"></i>Export CSV </a>
  </div>
{% endblock %}

{% block content %}
 <h2 class="page-heading">{{ page_title|default:"Employee Records" }}</h2>
  <div class="glass-section">
    <div class="row search-row">
      <div class="col">
        <form method="get" class="row">
          <input type="text" name="q" value="{{ query }}" placeholder="Search employee..." />
        </form>
      </div>
      <div class="right muted">Results: {{ employees|length }}</div>
    </div>

    <div class="table-wrap">
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Position</th>
            <th>Department</th>
            <th>Email</th>
            <th>Salary</th>
            <th>Date Joined</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          {% for emp in employees %}
          <tr>
            <td>{{ emp.name }}</td>
            <td>{{ emp.position }}</td>
            <td>{{ emp.department }}</td>
            <td>{{ emp.email }}</td>
            <td class="amount">{{ emp.salary }}</td>
            <td>{{ emp.date_joined }}</td>
            <td>
              <a href="{% url 'edit_employee' emp.emp_id %}" class="btn"><i class="bi bi-pencil-square"></i></a>
              <a href="{% url 'delete_employee' emp.emp_id %}" class="btn danger" onclick="return confirm('Are you sure?')"><i class="bi bi-trash"></i></a>
            </td>
          </tr>
          {% empty %}
          <tr><td colspan="7" class="muted">No employees found.</td></tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>
{% endblock %}
